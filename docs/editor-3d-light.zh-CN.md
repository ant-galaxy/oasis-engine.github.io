---
order: 3
title: 光照
type: 功能
group: 3D 渲染
label: Editor-Feature/Rendering-3d
---

## 介绍

在三维世界中，合理地搭配光照和材质可以让整个场景更加真实。

## 直接光

### 1. 平行光

光线以某个方向均匀射出，光线之间是平行的，不受位置影响，常用来模拟太阳光。

![image-20230314181447867](https://gw.alipayobjects.com/zos/OasisHub/3fbe665e-6b9d-470d-a1a6-bfe3ac73c7c8/image-20230314181447867.png)

- 使用：

<img src="https://gw.alipayobjects.com/zos/OasisHub/ab268781-b32a-4e54-b021-07589e15e9da/image-20230314182422257.png" alt="image-20230314182422257" style="zoom:50%;" />

| 属性 | 释义                             |
| :--- | :------------------------------- |
| 强度 | 控制平行光的强度，**值越高越亮** |
| 颜色 | 控制平行光的颜色                 |

### 2. 点光源

存在于空间中的一点，由该点向四面八方发射光线，光照强度随光源距离衰减，如灯泡。

![image-20230314182751079](https://gw.alipayobjects.com/zos/OasisHub/6e5e33d4-0daa-425c-b333-8359572970c6/image-20230314182751079.png)

- 使用

<img src="https://gw.alipayobjects.com/zos/OasisHub/cbc48c49-fb1c-4a5a-8375-eec0543bfea9/image-20230314182958748.png" alt="image-20230314182958748" style="zoom:50%;" />

| 属性 | 释义                                                             |
| :--- | :--------------------------------------------------------------- |
| 强度 | 控制点光源的强度，**值越高越亮**                                 |
| 颜色 | 控制点光源的颜色                                                 |
| 距离 | 有效距离，**距离光源超过有效距离的地方将无法接受到点光源的光线** |

### 3. 聚光灯

由一个特定位置发出，向特定方向延伸的光，光照强度随光源距离衰减，光照区域为锥形，锥形边缘随张开角度衰减，如手电筒。

![image-20230314183453137](https://gw.alipayobjects.com/zos/OasisHub/bc6a0121-2557-4f44-926f-4952d76a310a/image-20230314183453137.png)

- 使用

<img src="https://gw.alipayobjects.com/zos/OasisHub/3b2ebb37-391e-46f7-a834-df232a383983/image-20230314183653847.png" alt="image-20230314183653847" style="zoom:50%;" />

| 属性                   | 释义                                                             |
| :--------------------- | :--------------------------------------------------------------- |
| angle(散射角度)        | 表示与光源朝向夹角小于多少时有光线                               |
| intensity(强度)        | 控制聚光灯的强度，**值越高越亮**                                 |
| Color(颜色)            | 控制聚光灯的颜色                                                 |
| distance(距离)         | 有效距离，**距离光源超过有效距离的地方将无法接受到聚光灯的光线** |
| penumbra(半影衰减角度) | 表示在有效的夹角范围内，随着夹角增大光照强度逐渐衰减至 0 。      |

## 基于图像的照明（IBL）

![image-20230914142423022](https://gw.alipayobjects.com/zos/OasisHub/ce57cb4c-2285-4c36-b5a2-d89b70280282/image-20230914142423022.png)

除了直接光源，IBL 技术将 **周围环境** 视为一个大光源，保存在立方体纹理中，在渲染时，将立方体纹理的每个像素都视为光源，这种方式可以有效地捕捉环境的全局光照和氛围，使物体更好地融入其环境。

因为实时卷积计算 IBL 非常耗时，所以编辑器会 **提前烘焙周围环境** 到一张预滤波环境贴图中，即每个 mipmap 级别存储不同粗糙度的预卷积结果。

编辑器支持根据 **场景** 进行烘焙，在编辑器中点击场景，配置如下：

### 相关配置

- 环境光：默认天空模式，表示使用根据场景烘焙的球谐参数；纯色模式时使用纯色作为漫反射颜色。

![image-20230914164237484](https://gw.alipayobjects.com/zos/OasisHub/b0b1f614-dba2-41d5-a888-654256552287/image-20230914164237484.png)

- 环境反射：默认天空模式，表示使用根据场景烘焙的预滤波环境贴图；自定义模式时可以单独上传一张 HDR 贴图作为环境反射。

烘焙分辨率表示烘焙后的立方体纹理分辨率，默认 128 分辨率，烘焙产物约为 500KB，64 分辨率的烘焙产物约为 125KB，可以根据场景选择合适的烘焙分辨率。

![image-20230914165044652](https://gw.alipayobjects.com/zos/OasisHub/05562080-53f2-4256-852e-54bf182b9aec/image-20230914165044652.png)

- 场景背景：支持 纯色、天空、纹理 3 种模式。编辑器默认为天空模式，配大气散射材质球：

![image-20230914160050455](https://gw.alipayobjects.com/zos/OasisHub/304fdc0f-36ca-47d1-8f23-de4c4da08b58/image-20230914160050455.png)

天空模式默认绑定大气散射材质球，我们也可以自己手动创建材质球，**着色器** 类型选择 “Sky Procedural” 或者 “Sky Box”：

<img src="https://gw.alipayobjects.com/zos/OasisHub/0fa9b8af-9cf0-4a91-860b-907bdb7ba940/image-20230914161700839.png" alt="image-20230914161700839" style="zoom:25%;" />

其中大气散射为程序化 Shader，不需要绑定任意纹理；天空盒需要绑定一张 HDR 贴图当作背景，可以从 [Poly Haven](https://polyhaven.com/hdris) 下载，然后上传到编辑器中。

修改背景或者分辨率后，点击“烘焙场景”按钮即可重新进行烘焙。

## 阴影

平行光组件下面可以打开阴影功能，可以前往 [阴影教程](${docs}shadow-cn) 了解更多细节。

![image-20230314190243588](https://gw.alipayobjects.com/zos/OasisHub/5936315b-ebbe-41e0-a251-d03ff1378ab6/image-20230314190243588.png)
