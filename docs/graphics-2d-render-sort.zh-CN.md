---
order: 10
title: 2D 渲染元素渲染顺序
type: 图形
group: 2D
label: Graphics/2D
---

渲染元素的渲染顺序依赖很多因素，其中包括：渲染队列、渲染组件的渲染优先级、材质的渲染优先级、到相机距离以及在渲染队列中的位置。Galacean 会根据这些因素综合对渲染元素进行排序，2D 渲染元素主要包括：精灵、文本、Spine、Lottie。2D 渲染元素主要位于透明渲染队列，所以本文档主要介绍透明渲染队列中的 2D 渲染元素的渲染顺序。

## 渲染组件的渲染优先级

Galacean 的每个渲染器组件都有一个 priority 字段，用来表示在渲染队列中的渲染优先级，默认为 0，priority 越小，表示优先级越高，越早渲染，当两个渲染组件的 priority 一样的时候，再根据后面的其他因素（材质的渲染优先级、渲染组件到相机距离）来决定渲染顺序。

## 材质的渲染优先级

Galacean 给所有材质添加了一个 internal 的 _priority 属性，用来给同一个渲染组件下面不同的 SubMesh（每个都对应一个材质） 进行渲染排序，默认为 0，_priority 越小，表示优先级越高，越早渲染。当两个材质的 _priority 一样的时候，再根据后面的其他因素（渲染组件到相机距离）来决定渲染顺序。

## 渲染组件到相机距离

在透明渲染队列中，我们根据渲染组件到相机距离从远到近渲染，也就是距离越大，越早渲染。这里需要注意的是，不同类型的相机计算距离的算法不同。

### 正交相机

渲染组件到相机距离计算的是渲染组件位置与摄像机沿着摄像机视图方向（forward）的距离。

### 透视相机

渲染组件到相机距离计算的是渲染组件与摄像机位置的直接距离。