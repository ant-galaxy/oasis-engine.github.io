<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Oasis Engine</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify/lib/themes/vue.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify-toc@1.0.0/dist/toc.css">
  <!-- Hotjar Tracking Code for https://oasis-engine.gitee.io/ -->
  <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2329383,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
  </script>
  <style>
    .page_toc {
      margin-top: 90px;
    }
    .cover-main img{
      width: 160px;
    }
    .sidebar {
      background: #fcfcfc;
    }
    .app-nav ul li img {
      max-width: inherit;
    }
    .markdown-section table {
      display: table;
    }
  </style>
  <script>
    !function(t,e,a,r,c){t.TracertCmdCache=t.TracertCmdCache||[],t[c]=window[c]||
    {_isRenderInit:!0,call:function(){t.TracertCmdCache.push(arguments)},
    start:function(t){this.call('start',t)}},t[c].l=new Date;
    var n=e.createElement(a),s=e.getElementsByTagName(a)[0];
    n.async=!0,n.src=r,s.parentNode.insertBefore(n,s);
    n.onerror=function(){console.warn(decodeURI('Tracert%20%E8%84%9A%E6%9C%AC%E6%9C%AA%E6%88%90%E5%8A%9F%E5%8A%A0%E8%BD%BD,%20%E8%AF%B7%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E4%BB%A5%E5%8F%8A%20A%20%E4%BD%8D%E6%98%AF%E5%90%A6%E5%9C%A8%E4%B9%9D%E8%89%B2%E9%B9%BF%E5%BB%BA%E7%AB%8B%E6%B4%9E%E5%AF%9F'));
    var fallback=function(){console.warn(decodeURI('Tracert%20%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E5%A4%B1%E8%B4%A5%EF%BC%8C%E8%AF%B7%E6%A3%80%E6%9F%A5%20JS%20%E6%98%AF%E5%90%A6%E6%AD%A3%E7%A1%AE%E5%BC%95%E5%85%A5'))};
    for(var fnlist=["call","start","config","logPv","info","err","click","expo","pageName","pageState","time","timeEnd","parse","checkExpo","stringify","report","set","before"],i=0;i<fnlist.length;i++){t[c][fnlist[i]]=fallback}};
    }(window,document,'script','https://ur.alipay.com/tracert_a1638.js','Tracert');
    Tracert.start({});
  </script>
</head>
<body>
  <nav class="app-nav" id="app-nav">
    <ul>
      <li>
        <select name="choice" id="version-select">
          <option value="0.1">0.1</option>
          <option value="0.2">0.2</option>
          <option value="0.3" selected>0.3</option>
        </select>
      </li>
      <li><a href="/${version}/playground/" title="Playground" id="playground-link">Playground</a></li>
      <li><a href="/${version}/api/globals.html" title="API" id="api-link">API</a></li>
      <li><a href="#/${version}/manual/zh-cn/README" title="Engine" id="manual-link">Engine</a></li>
      <li><a href="#/editor/zh-cn/README" title="Editor">Editor</a></li>
      <li><a href="https://www.yuque.com/oasis-engine/blog" target="_blank" title="Blog">Blog</a></li>
      <li>DingTalk
        <ul>
          <li>&nbsp;内部服务群&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;开源社区群</li>
          <li><img src="https://gw.alipayobjects.com/mdn/rms_d27172/afts/img/A*K9myT6snmn0AAAAAAAAAAAAAARQnAQ" data-origin="https://gw.alipayobjects.com/mdn/rms_d27172/afts/img/A*K9myT6snmn0AAAAAAAAAAAAAARQnAQ" alt="DingTalk"></li>
        </ul>
      </li>
    </ul>
  </nav>
  <div id="app">
  </div>
  <script>
    (function () {
      var OASIS_LANG = localStorage.getItem('oasis-doc-lang') || 'zh-cn';
      var href = window.location.href;
      var versionRegResult = /\d+[.]\d+([.]\d+)?/.exec(href);
      var OASIS_VERSION = (versionRegResult && versionRegResult[0]) || '0.3';
      
      function replaceLink (link, from, to) {
        var url = link.getAttribute('href');
        link.setAttribute('href', url.replace(from, to));
      }

      var playgroundLink = document.querySelector('#playground-link');
      var apiLink = document.querySelector('#api-link');
      var apiLink = document.querySelector('#api-link');
      var manualLink = document.querySelector('#manual-link');

      replaceLink(playgroundLink, '${version}', OASIS_VERSION);
      replaceLink(apiLink, '${version}', OASIS_VERSION);
      replaceLink(manualLink, '${version}', OASIS_VERSION);

      var isHomePage = href.endsWith('/#/') || href.endsWith('github.io') || href.endsWith('github.io/');

      window.$docsify = {
        repo: 'https://github.com/oasis-engine',
        loadSidebar: true,
        // externalLinkTarget:  '_blank',
        fallbackLanguages: ['zh-cn', 'en'],
        // logo: 'https://gw.alipayobjects.com/zos/bmw-prod/69fa4781-a238-4a6e-957c-8393413f756a.svg',
        auto2top: true,
        coverpage: true,
        onlyCover: true,
        markdown: {
          renderer: {
            link: function (href, title, text) {
              if (href.indexOf('${book.api}') > -1) {
                // handle api url
                href = href.replace('${book.api}', `/${OASIS_VERSION}/api/`)
                return `<a href="${href}" target="_blank">${text}</a>`
              }
              else if (href.indexOf('${book.manual}') > -1) {
                href = href.replace('${book.manual}', `/${OASIS_VERSION}/manual/${window.$docsify.lang}/`)
                href = `#${href.replace('.md', '')}`
                return `<a href="${href}">${text}</a>`
              } else if (href.indexOf('${book.playground}') > -1) {
                href = href.replace('${book.playground}', `/${OASIS_VERSION}/playground/`)
                return `<a href="${href}">${text}</a>`
              }
              if (href.indexOf('${book.editor}') > -1) {
                // handle api url
                href = href.replace('${book.editor}', `/editor/${window.$docsify.lang}/`)
                href = `#${href.replace('.md', '')}`
                return `<a href="${href}">${text}</a>`
              }
              else if (href.indexOf('//') > -1) {
                // don't handle absolute path
                return `<a href="${href}" target="_blank">${text}</a>`
              }
              else if (href.indexOf('.md') > -1){
                // handle relative path
                href = `#${href.replace('.md', '')}`;
                return `<a href="${href}">${text}</a>`
              }
              else {
                return `<a href="${href}">${text}</a>`
              }
            }
          }
        },
        // plugins
        toc: {
          scope: '.markdown-section',
          headings: 'h1, h2, h3, h4, h5, h6',
          title: 'Table of Contents',
        },
        lang: OASIS_LANG
      };

      var nav = document.querySelector('#app-nav');
      var navItem;

      nav.addEventListener('click', function(e) {
        var item = e.target;

        if (item && item.tagName === 'A' && !item.getAttribute('target')) {
          if (navItem) {
            navItem.classList.remove('active');
          }

          item.classList.add('active');
          navItem = item;
        }
      });

      var versionSelect = document.querySelector('#version-select');

      versionSelect.value = OASIS_VERSION;

      versionSelect.addEventListener('change', function (e) {
        var version = e.target.value;

        window.location.href = window.location.href.replace(OASIS_VERSION, version);

        replaceLink(playgroundLink, OASIS_VERSION, version);
        replaceLink(apiLink, OASIS_VERSION, version);
        replaceLink(manualLink, OASIS_VERSION, version);

        OASIS_VERSION = version;
      })

      // var nav = document.querySelector('#nav');

      // nav.addEventListener('click', function (e) {
      //   var currentLang = window.$docsify.lang;

      //   var target = e.target;

      //   var lang = target.getAttribute('data-lang');

      //   if (!lang) {
      //     return;
      //   }

      //   window.$docsify.lang = lang;

      //   localStorage.setItem('oasis-doc-lang', lang);

      //   var href = window.location.href;

      //   href = href.replace(`/${currentLang}`, `/${lang}`);

      //   window.location.replace(href)
      // });
    })();
  </script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/docsify.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-typescript.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify-toc@1.0.0/dist/toc.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <!-- Hotjar Tracking Code for oasisengine.cn -->
</body>
</html>
